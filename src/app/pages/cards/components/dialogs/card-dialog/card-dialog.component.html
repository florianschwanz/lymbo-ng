<div (keydown)="onKeyDown($event)">
  <h2 mat-dialog-title>{{ dialogTitle }}</h2>
  <mat-dialog-content>
    <form #formCtrl="ngForm">
      <app-card-type-fragment [card]="card" (cardTypeEventEmitter)="onCardTypeChanged($event)">
      </app-card-type-fragment>

      <div *ngIf="containsDisplayAspect(displayAspectType.TITLES, card)">
        <div class="side-title">
          <app-side-title-fragment
            [sideTitle]="card.sides[0].title" [placeholder]=placeholderFront
            (sideTitleChangedEmitter)="onFrontTitleChanged($event)">
          </app-side-title-fragment>
        </div>
        <div class="side-title target">
          <div class="flexcontainer">
            <app-side-title-fragment
              [sideTitle]="card.sides[1].title" [placeholder]=placeholderBack
              (sideTitleChangedEmitter)="onBackTitleChanged($event)">
            </app-side-title-fragment>
          </div>
        </div>
      </div>

      <p>
        <mat-divider></mat-divider>
      </p>

      <!-- Vocabulary -->
      <app-vocabulary-form *ngIf="containsDisplayAspect(displayAspectType.VOCABULARY, card)"
                           [card]="card" [stack]="stack"
                           (cardEventEmitter)="onVocabularyChanged($event)"></app-vocabulary-form>

      <!-- Quiz -->
      <app-quiz-form *ngIf="containsDisplayAspect(displayAspectType.QUIZ, card)"
                     [card]="card" [stack]="stack"
                     (cardEventEmitter)="onQuizChanged($event)"></app-quiz-form>

      <app-tag-chips [tags]="tags | tagNames"
                     [tagOptions]="tagOptions"
                     [readonly]=false
                     (tagsChangedEmitter)="onTagsChanged($event)">
      </app-tag-chips>
    </form>
  </mat-dialog-content>
  <mat-dialog-actions class="flexcontainer">
    <button mat-button color="warn" *ngIf="mode == modeType.UPDATE" (click)="deleteCard()">
      Delete card
    </button>
    <div class="flexbox"></div>
    <button mat-button *ngIf="mode == modeType.ADD"
            [disabled]="!containsDisplayAspect(displayAspectType.CAN_BE_CREATED, card)"
            (click)="handleCardChanges()">
      Add card
    </button>
    <button mat-button *ngIf="mode == modeType.UPDATE"
            [disabled]="!containsDisplayAspect(displayAspectType.CAN_BE_UPDATED, card)"
            (click)="handleCardChanges()">
      Update card
    </button>
  </mat-dialog-actions>
</div>
